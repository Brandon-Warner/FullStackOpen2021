{"version":3,"sources":["components/Persons.js","components/Filter.js","components/Form.js","components/Message.js","services/phonebook.js","App.js","index.js"],"names":["Persons","person","removePerson","name","number","onClick","id","Filter","newSearch","handleSearch","value","onChange","Form","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Message","message","includes","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","className","baseUrl","axios","get","then","response","data","personObject","post","delete","changedPerson","put","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","newMessage","setNewMessage","useEffect","personService","initialPersons","event","target","oldPersons","map","toLowerCase","newPersons","filter","split","x","charAt","toUpperCase","substring","join","preventDefault","existsNumber","some","existsName","window","confirm","find","updatedNumber","catch","error","console","log","setTimeout","alert","length","addedPerson","concat","removedPerson","updatedPersons","removeThisPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19214fff.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Persons = ({ person, removePerson }) => {\n  return (\n    <li key={`${person.id}`}>\n      {person.name} {person.number}{\" \"}\n      <button onClick={removePerson}>delete</button>\n    </li>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = ({ newSearch, handleSearch }) => {\n  return (\n    <div>\n      search: <input value={newSearch} onChange={handleSearch} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Form = ({\n  addPerson,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n\n      <div>\n        <button type='submit'>add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import React from \"react\";\n\nconst Message = ({ message }) => {\n  const messageStyle = {\n    color: \"green\",\n    background: \"lightGrey\",\n    fontSize: \"20\",\n    borderStyle: \"solid\",\n    borderRadius: \"5\",\n    padding: \"10\",\n    marginBottom: \"20\",\n  };\n  const errorStyle = {\n    color: \"red\",\n    background: \"lightGrey\",\n    fontSize: \"20\",\n    borderStyle: \"solid\",\n    borderRadius: \"5\",\n    padding: \"10\",\n    marginBottom: \"20\",\n  };\n\n  if (message === null) {\n    return null;\n  }\n  if (message.includes(\"removed\")) {\n    return (\n      <div style={errorStyle} className='message'>\n        {message}\n      </div>\n    );\n  } else {\n    return (\n      <div style={messageStyle} className='message'>\n        {message}\n      </div>\n    );\n  }\n};\nexport default Message;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (personObject) => {\n  const request = axios.post(baseUrl, personObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, changedPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, changedPerson);\n  return request.then((response) => response.data);\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  getAll,\n  create,\n  remove,\n  update,\n};\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport Form from \"./components/Form\";\nimport Message from \"./components/Message\";\nimport personService from \"./services/phonebook.js\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [newMessage, setNewMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const capitalize = (str) => {\n    return str\n      .toLowerCase()\n      .split(\" \")\n      .map((x) => x.charAt(0).toUpperCase() + x.substring(1))\n      .join(\" \");\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    const existsNumber = persons.some((person) => person.number === newNumber);\n    const existsName = persons.some((person) => person.name === newName);\n    if (!existsName) {\n      personService\n        .create(personObject)\n        .then((addedPerson) => {\n          setPersons(persons.concat(addedPerson));\n          setNewMessage(`${personObject.name} was added to phonebook`);\n          setTimeout(() => {\n            setNewMessage(null);\n          }, 5000);\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          // setNewMessage(error.response.data);\n        });\n    } else if (existsName && !existsNumber) {\n      if (\n        window.confirm(\n          `This contact is already added to phonebook, replace old number with new one?`\n        )\n      ) {\n        const person = persons.find((person) => person.name === newName);\n        const changedPerson = { ...person, number: newNumber };\n\n        personService\n          .update(person.id, changedPerson)\n          .then((updatedNumber) => {\n            setPersons(\n              persons.map((person) =>\n                person.name !== newName ? person : updatedNumber\n              )\n            );\n          })\n          .catch((error) => {\n            console.log(error);\n            setNewMessage(\n              `${person.name}'s contact information has already been removed`\n            );\n            setTimeout(() => {\n              setNewMessage(null);\n            }, 5000);\n          });\n      }\n    } else if (existsName) {\n      window.alert(`${newName} is already in the phonebook`);\n    } else if (newName.length < 3) {\n      setNewMessage(`${newName} does not meet the required length of name (3)`);\n      setTimeout(() => {\n        setNewMessage(null);\n      }, 5000);\n    } else if (newNumber.length < 10) {\n      setNewMessage(\n        `${newNumber} does not meet the required length of number (8)`\n      );\n      setTimeout(() => {\n        setNewMessage(null);\n      }, 5000);\n    }\n  };\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = (event) => {\n    setNewSearch(event.target.value);\n\n    let oldPersons = persons.map((person) => {\n      return {\n        name: person.name.toLowerCase(),\n        number: person.number,\n        id: person.id,\n      };\n    });\n\n    if (event !== \"\") {\n      let newPersons = [];\n      setNewSearch(event.target.value.toLowerCase());\n\n      newPersons = oldPersons.filter((person) => {\n        if (person.name.includes(newSearch)) {\n          person.name = capitalize(person.name);\n          return { name: person.name, number: person.number, id: person.id };\n        }\n        return \"\";\n      });\n\n      setPersons(newPersons);\n    } else {\n      setPersons(persons);\n    }\n  };\n\n  const removeThisPerson = (id) => {\n    const person = persons.find((person) => person.id === id);\n\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .remove(id)\n        .then((removedPerson) => console.log(removedPerson))\n        .catch((error) => {\n          console.log(\"error:\", error);\n        });\n      personService\n        .getAll()\n        .then((updatedPersons) => setPersons(updatedPersons));\n    }\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Message message={newMessage} />\n      <Filter newSearch={newSearch} handleSearch={handleSearch} />\n      <h2>Add New Contact</h2>\n      <Form\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n      <div>\n        <ul>\n          {persons.map((person) => (\n            <Persons\n              key={person.id}\n              person={person}\n              removePerson={() => removeThisPerson(person.id)}\n            />\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}